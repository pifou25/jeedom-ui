<div class="device-card">
    <h3>{{ device.name }}</h3>
    <p>Type: {{ device.eqType_name }}
      <span *ngIf="countCommands() > 0">({{ countCommands() }} commandes)</span>
    </p>
    
    <div *ngIf="isExecuting" class="loading-spinner"></div>
    
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>
    
    <div *ngFor="let cmd of getInfoCommands()">
      <div *ngIf="cmd.isVisible">
        <strong>{{ cmd.name }}:</strong> {{ cmd.currentValue }} {{ cmd.unite }}
      </div>
    </div>
    
    <div *ngIf="getActionCommands().length > 0">
      <hr>
      <div *ngFor="let cmd of getActionCommands()">
        <button 
          *ngIf="cmd.isVisible" 
          class="btn" 
          (click)="executeCommand(cmd)"
          [disabled]="isExecuting"
        >
          {{ cmd.name }}
        </button>
      </div>
    </div>
</div>